<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>Ekrixi AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Lora:ital,wght@0,400;0,500;0,600;1,400;1,500&display=swap" rel="stylesheet">
    
    <script>
      window.process = { env: { NODE_ENV: 'development' } };
      
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              display: ['Plus Jakarta Sans', 'sans-serif'],
              mono: ['JetBrains Mono', 'monospace'],
              serif: ['Lora', 'serif'],
            },
            colors: {
              nexus: {
                950: 'var(--bg-950)', 900: 'var(--bg-900)', 800: 'var(--bg-800)', 
                700: 'var(--bg-700)', 600: 'var(--bg-600)', 500: 'var(--accent-500)', 
                400: 'var(--accent-400)', 300: 'var(--accent-300)', accent: 'var(--accent-color)',
                arcane: 'var(--arcane-color)', essence: 'var(--essence-color)', 
                ruby: '#e11d48',
                text: 'var(--text-main)',
                muted: 'var(--text-muted)'
              }
            },
            animation: {
              'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            }
          },
        }
      }
    </script>
    <style>
      :root {
        /* Default Modern (Deep Obsidian) */
        --bg-950: #020203; 
        --bg-900: #08080c; 
        --bg-800: #0d0d14;
        --bg-700: #151522; 
        --bg-600: #1e1e30;
        --accent-500: #06b6d4; 
        --accent-400: #22d3ee; 
        --accent-300: #67e8f9;
        --accent-color: #06b6d4;
        --arcane-color: #6366f1;
        --essence-color: #10b981;
        --mythic-core: #050508;
        --ley-color: rgba(6, 182, 212, 0.05);
        --glow-color: rgba(6, 182, 212, 0.03);
        --text-main: #f8fafc;
        --text-muted: #94a3b8;
        --shadow-color: rgba(0,0,0,0.5);
      }

      [data-theme='vanilla-light'] {
        --bg-950: #f1f5f9; /* Slate 100 */
        --bg-900: #ffffff; /* White */
        --bg-800: #e2e8f0; /* Slate 200 */
        --bg-700: #cbd5e1; /* Slate 300 */
        --bg-600: #94a3b8;
        --accent-500: #2563eb; 
        --accent-400: #3b82f6; 
        --accent-300: #60a5fa;
        --accent-color: #2563eb;
        --arcane-color: #7c3aed;
        --essence-color: #16a34a;
        --mythic-core: #ffffff;
        --ley-color: rgba(37, 99, 235, 0.06);
        --glow-color: rgba(37, 99, 235, 0.02);
        --text-main: #0f172a; /* Slate 900 */
        --text-muted: #475569; /* Slate 600 */
        --shadow-color: rgba(0,0,0,0.05);
      }

      [data-theme='vanilla-dark'] {
        --bg-950: #0a0a0a; 
        --bg-900: #171717; 
        --bg-800: #262626;
        --bg-700: #404040; 
        --bg-600: #525252;
        --accent-500: #3b82f6; 
        --accent-400: #60a5fa; 
        --accent-300: #93c5fd;
        --accent-color: #3b82f6;
        --arcane-color: #8b5cf6;
        --essence-color: #22c55e;
        --mythic-core: #000000;
        --ley-color: rgba(59, 130, 246, 0.03);
        --glow-color: transparent;
        --text-main: #f5f5f5;
        --text-muted: #a3a3a3;
        --shadow-color: rgba(0,0,0,0.8);
      }

      body { 
        background-color: var(--bg-950); 
        color: var(--text-main); 
        overflow: hidden; 
        height: 100vh;
        margin: 0;
        font-family: 'Inter', sans-serif;
        transition: background-color 0.4s ease, color 0.4s ease;
      }
      
      #root::before {
        content: "";
        position: fixed;
        inset: 0;
        background: 
          radial-gradient(circle at 50% 40%, var(--mythic-core) 0%, transparent 70%),
          radial-gradient(circle at 0% 0%, var(--glow-color) 0%, transparent 40%),
          radial-gradient(circle at 100% 100%, var(--glow-color) 0%, transparent 40%);
        pointer-events: none;
        z-index: -1;
      }

      .bg-grid {
        position: fixed; top: 0; left: -50%; width: 200%; height: 200%;
        background-image: linear-gradient(var(--ley-color) 1px, transparent 1px), 
                          linear-gradient(90deg, var(--ley-color) 1px, transparent 1px);
        background-size: 60px 60px;
        transform: perspective(1000px) rotateX(60deg) translateY(-10%) translateZ(-300px);
        mask-image: radial-gradient(ellipse at center, black 0%, transparent 80%);
        pointer-events: none; z-index: 0; opacity: 0.4;
      }

      .no-scrollbar::-webkit-scrollbar { display: none; }
      .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      
      h1, h2, h3, .font-display { font-family: 'Plus Jakarta Sans', sans-serif; font-weight: 700; letter-spacing: -0.02em; }
      
      /* Enhanced Prose Styles for Encyclopedia */
      .prose { 
        color: var(--text-main);
        font-size: 1.1rem;
        line-height: 1.7;
      }
      .prose p { margin-bottom: 1.5rem; opacity: 0.9; }
      .prose strong { color: var(--accent-color); font-weight: 700; }
      .prose h1 { font-size: 3rem; font-weight: 900; margin-top: 3rem; margin-bottom: 1.5rem; letter-spacing: -0.04em; line-height: 1.1; }
      .prose h2 { font-size: 2rem; font-weight: 800; margin-top: 2.5rem; margin-bottom: 1.2rem; letter-spacing: -0.02em; border-bottom: 1px solid rgba(128,128,128,0.2); padding-bottom: 0.5rem; }
      .prose h3 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: 1rem; }
      .prose blockquote { border-left: 4px solid var(--accent-color); padding-left: 1.5rem; font-style: italic; margin: 2rem 0; opacity: 0.8; background: rgba(128,128,128,0.05); padding: 1rem 1.5rem; border-radius: 0 1rem 1rem 0; }
      .prose ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 1.5rem; }
      .prose ol { list-style-type: decimal; padding-left: 1.5rem; margin-bottom: 1.5rem; }
      .prose li { margin-bottom: 0.5rem; }
      .prose code { background: var(--bg-800); padding: 0.2rem 0.4rem; border-radius: 6px; font-family: 'JetBrains Mono', monospace; font-size: 0.9em; border: 1px solid rgba(128,128,128,0.2); }
      .prose hr { border: 0; height: 1px; background: rgba(128,128,128,0.2); margin: 3rem 0; }

      /* Zettelkasten Link Styling */
      .nexus-wiki-link {
          color: var(--accent-color);
          font-weight: 700;
          text-decoration: none;
          padding: 0 4px;
          margin: 0 -2px;
          background: rgba(6, 182, 212, 0.04);
          border-bottom: 1px solid rgba(6, 182, 212, 0.2);
          border-radius: 4px;
          transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
          display: inline-block;
          cursor: pointer;
      }
      .nexus-wiki-link:hover {
          background: rgba(6, 182, 212, 0.12);
          border-bottom-color: var(--accent-color);
          box-shadow: 0 2px 10px rgba(6, 182, 212, 0.1);
          transform: translateY(-1px);
      }
      .nexus-wiki-link::before {
          content: '[[ ';
          opacity: 0.3;
          font-family: var(--mono);
          font-size: 0.8em;
          font-weight: 400;
      }
      .nexus-wiki-link::after {
          content: ' ]]';
          opacity: 0.3;
          font-family: var(--mono);
          font-size: 0.8em;
          font-weight: 400;
      }

      .nexus-ghost-link {
          color: var(--text-muted);
          opacity: 0.7;
          font-style: italic;
          font-weight: 500;
          text-decoration: none;
          border-bottom: 1px dashed rgba(128, 128, 128, 0.3);
          cursor: help;
          padding: 0 2px;
      }
      .nexus-ghost-link:hover {
          opacity: 1;
          color: var(--text-main);
          border-bottom-color: var(--text-muted);
      }
      .nexus-ghost-link::before {
          content: '[[ ';
          opacity: 0.2;
          font-family: var(--mono);
          font-style: normal;
      }
      .nexus-ghost-link::after {
          content: ' ]]';
          opacity: 0.2;
          font-family: var(--mono);
          font-style: normal;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.4",
    "react-dom/": "https://esm.sh/react-dom@^19.2.4/",
    "react/": "https://esm.sh/react@^19.2.4/",
    "lucide-react": "https://esm.sh/lucide-react@^0.563.0",
    "@google/genai": "https://esm.sh/@google/genai@^1.39.0",
    "react-markdown": "https://esm.sh/react-markdown@^10.1.0",
    "d3": "https://esm.sh/d3@^7.9.0"
  }
}
</script>
</head>
  <body data-theme="vanilla-light">
    <div class="bg-grid"></div>
    <div id="root" class="relative z-10 h-full w-full"></div>
    <script type="module" src="./index.tsx"></script>
  </body>
</html>